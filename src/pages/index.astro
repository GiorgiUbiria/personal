---
import "@fontsource-variable/dm-sans";
import Container from "../components/Container.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import { Icon } from "astro-icon/components";
---

<html lang="gl">
  <head>
    <script is:inline>
      if (localStorage.getItem("theme") === null) {
        document.documentElement.setAttribute("data-theme", "lofi");
      } else
        document.documentElement.setAttribute(
          "data-theme",
          localStorage.getItem("theme")
        );
    </script>
    <script>
      import { themeChange } from "theme-change";
      themeChange();
    </script>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />
    <title>Giorgi Ubiria CV</title>
  </head>
  <body class="flex flex-col min-h-screen bg-gradient-to-br from-base-100 via-base-200/30 to-base-100 animate-fade-in">
    <div class="fixed inset-0 bg-gradient-to-br from-primary/5 via-transparent to-secondary/5 pointer-events-none"></div>
    
    <div class="relative z-10 flex flex-col min-h-screen">
      <!-- Theme Toggle -->
      <div class="flex items-center absolute top-4 right-4 md:top-6 md:right-6 lg:top-8 lg:right-8 xl:top-10 xl:right-10 z-20 backdrop-blur-sm bg-base-100/80 rounded-full p-2 shadow-lg border border-base-300/50 hover:shadow-xl transition-all duration-300">
        <Icon name="carbon:moon" class="w-4 h-4 text-base-content/70 transition-colors duration-300" />
        <input
          type="checkbox"
          data-toggle-theme="black,lofi"
          data-act-class="ACTIVECLASS"
          class="toggle toggle-sm mx-2 bg-secondary hover:bg-secondary/80 transition-all duration-300"
          checked
        />
        <Icon name="carbon:light" class="w-4 h-4 text-base-content/70 transition-colors duration-300" />
      </div>

      <!-- Header Section -->
      <div class="w-full flex justify-center">
        <Header />
      </div>

      <!-- Divider -->
      <div class="w-full flex justify-center">
        <div class="divider h-fit max-w-3xl w-[95vw] flex flex-nowrap bg-gradient-to-r from-transparent via-secondary/50 to-transparent animate-slide-in-delayed"></div>
      </div>
      
      <!-- Main Content -->
      <main class="flex-grow flex justify-center">
        <div class="max-h-[90vh] md:max-h-[70vh] max-w-3xl overflow-y-scroll py-2 w-[95vw] animate-slide-up-delayed">
          <div class="container">
            <Container />
          </div>
        </div>
      </main>
      
      <!-- Footer -->
      <Footer class="flex justify-center items-center py-4 animate-fade-in-delayed" />
    </div>
  </body>
</html>

<style is:global>
  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: "DM Sans Variable", sans-serif;
    transition: background-color 0.3s ease;
  }

  /* Enhanced animations */
  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes slide-in {
    from {
      transform: translateX(-100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slide-up {
    from {
      transform: translateY(30px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  .animate-fade-in {
    animation: fade-in 0.8s ease-out;
  }

  .animate-slide-in-delayed {
    animation: slide-in 0.6s ease-out 0.2s both;
  }

  .animate-slide-up-delayed {
    animation: slide-up 0.8s ease-out 0.4s both;
  }

  .animate-fade-in-delayed {
    animation: fade-in 0.6s ease-out 0.6s both;
  }

  /* Enhanced scrollbar */
  .overflow-y-scroll::-webkit-scrollbar {
    width: 6px;
  }

  .overflow-y-scroll::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 10px;
  }

  .overflow-y-scroll::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, oklch(var(--p)), oklch(var(--s)));
    border-radius: 10px;
    transition: all 0.3s ease;
  }

  .overflow-y-scroll::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, oklch(var(--p)/0.8), oklch(var(--s)/0.8));
    transform: scaleX(1.2);
  }

  .overflow-y-scroll {
    scrollbar-width: thin;
    scrollbar-color: oklch(var(--p)) transparent;
  }

  /* Container responsive layout */
  @media (min-width: 768px) {
    .container {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }
  }

  @media only screen and (max-width: 480px) {
    * {
      font-size: 12px;
    }
  }

  @media (max-width: 768px) {
    .container {
      flex-direction: column;
    }
  }

  /* Smooth transitions for theme changes */
  * {
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
  }

  /* Focus styles for accessibility */
  *:focus-visible {
    outline: 2px solid oklch(var(--p));
    outline-offset: 2px;
    border-radius: 4px;
  }
</style>
